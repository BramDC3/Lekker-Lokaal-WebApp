@model LekkerLokaal.Models.HomeViewModels.DetailViewModel;

@{
    ViewData["Title"] = "Detail";
}

<!-- –––––––––––––––[ PAGE CONTENT ]––––––––––––––– -->
<main id="mainContent" class="main-content">
    <!-- Page Container -->
    <div class="page-container ptb-60">
        <div class="container">
            <div class="row row-rl-10 row-tb-20">
                <div class="page-content col-xs-12 col-sm-7 col-md-8">
                    <div class="row row-tb-20">
                        <div class="col-xs-12">
                            <div class="deal-deatails panel">
                                <div class="deal-slider">
                                    <div id="product_slider" class="flexslider">
                                        <ul class="slides">
                                            @foreach (string path in Model.getAfbeeldingenPathLijst)
                                            {

                                                <li>
                                                    <img src="~/@path">
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                    <div id="product_slider_nav" class="flexslider flexslider-nav">
                                        <ul class="slides">
                                            @foreach (string path in Model.getAfbeeldingenPathLijst)
                                            {

                                                <li>
                                                    <img class="p-2" src="~/@path">
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                                <div class="deal-body p-20">
                                    <h3 class="mb-10">@Model.Naam</h3>
                                    <div class="rating mb-10">
                                    </div>

                                    <p class="mb-15">@Model.Beschrijving</p>

                                </div>
                            </div>
                        </div>


                    </div>
                </div>
                <div class="page-sidebar col-md-4 col-sm-5 col-xs-12">
                    <!-- Blog Sidebar -->
                    <aside class="sidebar blog-sidebar">
                        <div class="row row-tb-10">
                            <div class="col-xs-12">
                                <div class="widget single-deal-widget panel ptb-30 prl-20">
                                    <div class="widget-body text-center">
                                        <h2 class="mb-20 h3">
                                            @Model.HandelaarNaam
                                        </h2>
                                        <ul class="deal-meta list-inline mb-10 color-mid">
                                            <li class="color-muted"><i class="ico fa fa-map-marker mr-5"></i>Aalst</li>
                                            <li class="color-muted"><i class="ico lnr lnr-users mr-5"></i>@Model.AantalBesteld besteld</li>
                                        </ul>
                                        <p class="color-muted">
                                            @Model.HandelaarBeschrijving
                                        </p>
                                        <div class="price mb-20">
                                            <h2 class="price"> <i class="fa fa-credit-card-alt"></i> Vanaf &euro; @Model.MinPrijs</h2>
                                        </div>
                                        <div class="buy-now mb-40">
                                            <a href="#" target="_blank" class="btn btn-block btn-lg">
                                                <i class="fa fa-shopping-cart font-16 mr-10"></i> In winkelmandje
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <!-- Recent Posts -->
                                <div class="widget about-seller-widget panel ptb-30 prl-20">
                                    <h3 class="widget-title h-title text-center mb-20">Locatie @Model.Naam</h3>
                                    <div class="widget-body t-center">
                                        <div style="height: 300px;" id="contact-map"></div>
                                    </div>
                                </div>
                                <!-- End Recent Posts -->
                            </div>
                        </div>
                    </aside>
                    <!-- End Blog Sidebar -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Page Container -->
    <script>
        function initMap() {
            var positie = "@Model.FormatedAdress";
            var map = new google.maps.Map(document.getElementById('contact-map'), {
                zoom: 15
            });



            var geocoder = new google.maps.Geocoder();

            geocoder.geocode({
                'address': positie
            },
                function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        var locatiecords = { lat: results[0].geometry.location.lat() + 0.0014, lng: (results[0].geometry.location.lng()) };

                        marker = new google.maps.Marker({
                            position: results[0].geometry.location,
                            map: map
                        });
                        map.setCenter(locatiecords);
                        var contentString = '<div class="col-xs-12"> <p class="font-18"> @Model.Naam </p> <p class="font-14"> @Model.FormatedAdress </p> </div>';

                        var infowindow = new google.maps.InfoWindow({
                            content: contentString
                        });

                        marker.addListener('click', function () {
                            infowindow.open(map, marker);
                        });
                    }
                });


        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQ0Qfa3jPba5djMOOwScpRT_EHqxDXHBc&callback=initMap">
    </script>
</main>

<!-- –––––––––––––––[ END PAGE CONTENT ]––––––––––––––– -->